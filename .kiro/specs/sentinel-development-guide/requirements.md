# Kiro와 Amazon Q를 활용한 Sentinel 개발 가이드 요구사항

## 소개

HCP Terraform 및 Terraform Enterprise 사용자들이 사내 컴플라이언스, 지침, 가이드라인을 위한 Sentinel 정책을 효과적으로 개발할 수 있도록 돕는 종합 가이드를 제작합니다. 이 가이드는 Kiro IDE의 고급 기능들(Spec, Agent Hooks, Agent Steering)과 MCP(Model Context Protocol)를 활용하여 개발 생산성을 극대화하는 방법을 제시합니다.

## 요구사항

### 요구사항 1: Sentinel 기초 개발 가이드

**사용자 스토리:** 개발자로서 Sentinel 정책을 처음 개발하는 경우, 문법과 구조를 이해하고 기본적인 정책을 작성할 수 있기를 원합니다.

#### 승인 기준
1. WHEN 개발자가 Sentinel 문법을 학습할 때 THEN 시스템은 기본 문법, 데이터 타입, 함수 사용법을 제공해야 합니다
2. WHEN 개발자가 정책 구조를 이해하려 할 때 THEN 시스템은 imports, constants, functions, rules의 역할과 구성 방법을 설명해야 합니다
3. WHEN 개발자가 첫 번째 정책을 작성할 때 THEN 시스템은 단계별 예제와 템플릿을 제공해야 합니다
4. WHEN 개발자가 Terraform 데이터 접근을 이해하려 할 때 THEN 시스템은 tfplan, tfconfig, tfstate 사용법을 설명해야 합니다

### 요구사항 2: Kiro IDE 활용 개발 워크플로우

**사용자 스토리:** 개발자로서 Kiro IDE의 고급 기능들을 활용하여 Sentinel 개발 효율성을 높이고 싶습니다.

#### 승인 기준
1. WHEN 개발자가 Spec 기능을 사용할 때 THEN 시스템은 요구사항 정의부터 구현까지의 체계적인 개발 프로세스를 제공해야 합니다
2. WHEN 개발자가 Agent Hooks를 설정할 때 THEN 시스템은 코드 변경 시 자동 테스트 실행, 정책 검증 등의 자동화 방법을 제공해야 합니다
3. WHEN 개발자가 Agent Steering을 구성할 때 THEN 시스템은 프로젝트별 컨텍스트와 가이드라인을 자동으로 적용하는 방법을 제공해야 합니다
4. WHEN 개발자가 코드 리뷰를 요청할 때 THEN 시스템은 Sentinel 모범 사례와 보안 검토 항목을 자동으로 확인해야 합니다

### 요구사항 3: MCP 통합 및 외부 도구 활용

**사용자 스토리:** 개발자로서 MCP를 통해 외부 도구들과 연동하여 더 풍부한 컨텍스트로 Sentinel 정책을 개발하고 싶습니다.

#### 승인 기준
1. WHEN 개발자가 AWS 정책을 개발할 때 THEN 시스템은 AWS 문서 MCP를 통해 최신 보안 가이드라인을 자동으로 참조해야 합니다
2. WHEN 개발자가 Terraform 모듈을 분석할 때 THEN 시스템은 Terraform Registry MCP를 통해 모듈 정보를 자동으로 가져와야 합니다
3. WHEN 개발자가 아키텍처 다이어그램이 필요할 때 THEN 시스템은 Diagram MCP를 통해 정책 적용 범위를 시각화해야 합니다
4. WHEN 개발자가 정책 테스트를 작성할 때 THEN 시스템은 관련 MCP 도구들을 활용하여 테스트 데이터를 생성해야 합니다

### 요구사항 4: 설계 방법론 및 모범 사례

**사용자 스토리:** 아키텍트로서 조직의 컴플라이언스 요구사항을 체계적으로 Sentinel 정책으로 변환하고 관리하고 싶습니다.

#### 승인 기준
1. WHEN 아키텍트가 정책 설계를 시작할 때 THEN 시스템은 비즈니스 요구사항을 기술적 정책으로 변환하는 방법론을 제공해야 합니다
2. WHEN 아키텍트가 정책 구조를 설계할 때 THEN 시스템은 모듈화, 재사용성, 유지보수성을 고려한 설계 패턴을 제공해야 합니다
3. WHEN 아키텍트가 정책 거버넌스를 구축할 때 THEN 시스템은 정책 버전 관리, 승인 프로세스, 배포 전략을 제공해야 합니다
4. WHEN 아키텍트가 성능을 최적화할 때 THEN 시스템은 대규모 인프라에서의 정책 실행 최적화 방법을 제공해야 합니다

### 요구사항 5: Git 워크플로우 및 CI/CD 통합

**사용자 스토리:** DevOps 엔지니어로서 Sentinel 정책 개발부터 배포까지의 전체 라이프사이클을 자동화하고 싶습니다.

#### 승인 기준
1. WHEN 개발자가 정책을 커밋할 때 THEN 시스템은 자동으로 문법 검사, 테스트 실행, 보안 스캔을 수행해야 합니다
2. WHEN 정책이 Pull Request로 제출될 때 THEN 시스템은 자동으로 코드 리뷰, 영향도 분석, 승인 워크플로우를 실행해야 합니다
3. WHEN 정책이 승인되어 병합될 때 THEN 시스템은 자동으로 HCP Terraform/Terraform Enterprise에 배포해야 합니다
4. WHEN 배포된 정책에 문제가 발생할 때 THEN 시스템은 자동으로 롤백하고 알림을 발송해야 합니다

### 요구사항 6: 테스팅 및 디버깅 전략

**사용자 스토리:** 개발자로서 작성한 Sentinel 정책이 다양한 시나리오에서 올바르게 작동하는지 확인하고 문제를 신속하게 해결하고 싶습니다.

#### 승인 기준
1. WHEN 개발자가 정책을 테스트할 때 THEN 시스템은 단위 테스트, 통합 테스트, 시나리오 테스트 방법을 제공해야 합니다
2. WHEN 개발자가 테스트 데이터를 생성할 때 THEN 시스템은 실제 Terraform 상태를 기반으로 한 모의 데이터 생성 방법을 제공해야 합니다
3. WHEN 정책 실행 중 오류가 발생할 때 THEN 시스템은 상세한 디버깅 정보와 해결 방법을 제공해야 합니다
4. WHEN 개발자가 성능을 측정할 때 THEN 시스템은 정책 실행 시간, 메모리 사용량 등의 메트릭을 제공해야 합니다

### 요구사항 7: 조직별 커스터마이징 및 확장

**사용자 스토리:** 조직 관리자로서 우리 조직의 특수한 요구사항과 표준에 맞게 Sentinel 개발 환경을 커스터마이징하고 싶습니다.

#### 승인 기준
1. WHEN 관리자가 조직 표준을 설정할 때 THEN 시스템은 코딩 스타일, 네이밍 컨벤션, 문서화 규칙을 적용해야 합니다
2. WHEN 관리자가 승인 프로세스를 정의할 때 THEN 시스템은 조직의 거버넌스 요구사항에 맞는 워크플로우를 제공해야 합니다
3. WHEN 관리자가 교육 자료를 제공할 때 THEN 시스템은 조직별 예제와 템플릿을 생성하고 관리할 수 있어야 합니다
4. WHEN 관리자가 메트릭을 수집할 때 THEN 시스템은 정책 사용률, 위반 통계, 개발 생산성 지표를 제공해야 합니다

### 요구사항 8: 실제 사례 및 템플릿 라이브러리

**사용자 스토리:** 개발자로서 일반적인 컴플라이언스 요구사항에 대한 검증된 템플릿과 실제 사례를 활용하여 빠르게 정책을 개발하고 싶습니다.

#### 승인 기준
1. WHEN 개발자가 보안 정책을 개발할 때 THEN 시스템은 CIS, SOC2, PCI-DSS 등의 표준에 맞는 템플릿을 제공해야 합니다
2. WHEN 개발자가 비용 최적화 정책을 개발할 때 THEN 시스템은 리소스 크기, 사용률, 태깅 등의 검증 템플릿을 제공해야 합니다
3. WHEN 개발자가 운영 정책을 개발할 때 THEN 시스템은 백업, 모니터링, 로깅 등의 운영 요구사항 템플릿을 제공해야 합니다
4. WHEN 개발자가 사례를 학습할 때 THEN 시스템은 실제 기업에서 사용하는 정책 예제와 구현 패턴을 제공해야 합니다